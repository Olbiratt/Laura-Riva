<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Quiz Speciale ‚Äì Regalo di Natale</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg1: #120b10;
      --bg2: #184029;
      --accent: #d32f2f;
      --accent-soft: #ffe082;
      --card-bg: rgba(12, 12, 20, 0.93);
      --text-main: #ffffff;
      --text-soft: #ffe8c2;
      --button-bg: #c62828;
      --button-bg-hover: #e53935;
      --correct: #2e7d32;
      --wrong: #b71c1c;
      --gold: #ffd54f;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background:
        radial-gradient(circle at top, #ffcc80 0, transparent 55%),
        linear-gradient(135deg, #3e2723 0%, #880e4f 40%, #1b5e20 100%);
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      overflow: hidden;
      position: relative;
    }

    /* Falling snow */
    .snowflake {
      position: fixed;
      top: -10px;
      color: #ffffff;
      font-size: 0.8rem;
      opacity: 0.8;
      pointer-events: none;
      animation: snowfall linear infinite;
      z-index: 1;
    }

    @keyframes snowfall {
      0% {
        transform: translateY(-10vh) translateX(0);
        opacity: 0;
      }
      15% {
        opacity: 0.8;
      }
      100% {
        transform: translateY(110vh) translateX(20px);
        opacity: 0;
      }
    }

    .app {
      width: 100%;
      max-width: 820px;
      background: var(--card-bg);
      border-radius: 26px;
      box-shadow:
        0 0 0 2px rgba(255, 255, 255, 0.05),
        0 24px 60px rgba(0, 0, 0, 0.75);
      padding: 26px 20px 30px;
      position: relative;
      overflow: hidden;
      z-index: 2;
    }

    @media (min-width: 640px) {
      .app {
        padding: 32px 34px 36px;
      }
    }

    .hidden {
      display: none;
    }

    h1, h2 {
      font-weight: 700;
      letter-spacing: 0.03em;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.35em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    h1::before,
    h1::after {
      content: "üéÑ";
      font-size: 1.4rem;
    }

    h2 {
      font-size: 1.1rem;
      color: var(--accent-soft);
      margin-bottom: 12px;
    }

    p {
      margin-bottom: 8px;
      line-height: 1.5;
      color: var(--text-soft);
      font-size: 0.98rem;
    }

    .primary-btn, .answer-btn, .retry-btn {
      border: none;
      border-radius: 999px;
      padding: 10px 22px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.15s ease, background-color 0.15s ease;
      background: var(--button-bg);
      color: #fff;
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.6);
    }

    .primary-btn:hover,
    .answer-btn:hover,
    .retry-btn:hover {
      background: var(--button-bg-hover);
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(0, 0, 0, 0.7);
    }

    .primary-btn:active,
    .answer-btn:active,
    .retry-btn:active {
      transform: translateY(0);
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.6);
    }

    .primary-btn {
      margin-top: 18px;
      background: linear-gradient(135deg, #c62828, #f9a825);
    }

    .primary-btn:hover {
      background: linear-gradient(135deg, #d32f2f, #ffca28);
    }

    .footer-note {
      margin-top: 14px;
      font-size: 0.9rem;
      color: #ffecb3;
    }

    /* Music toggle */
    #music-toggle {
      position: absolute;
      top: 14px;
      left: 14px;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.35);
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 0.9rem;
      cursor: pointer;
      backdrop-filter: blur(6px);
      color: #fffde7;
      z-index: 3;
    }

    #music-toggle:hover {
      background: rgba(255, 255, 255, 0.22);
    }

    /* Garland / lights at the top */
    .garland {
      position: absolute;
      top: 0;
      left: -10%;
      width: 120%;
      height: 70px;
      background:
        radial-gradient(circle at 10% 40%, #ffeb3b 0 6px, transparent 7px),
        radial-gradient(circle at 30% 30%, #ff5252 0 6px, transparent 7px),
        radial-gradient(circle at 50% 45%, #69f0ae 0 6px, transparent 7px),
        radial-gradient(circle at 70% 35%, #ffab40 0 6px, transparent 7px),
        radial-gradient(circle at 90% 40%, #40c4ff 0 6px, transparent 7px);
      background-repeat: no-repeat;
      pointer-events: none;
      opacity: 0.7;
    }

    .garland::before {
      content: "";
      position: absolute;
      inset: 10px 6%;
      border-bottom: 2px dashed rgba(255, 255, 255, 0.22);
      border-radius: 50%;
    }

    /* Quiz layout */
    .question-header {
      margin-bottom: 12px;
    }

    .question-counter {
      font-size: 0.92rem;
      color: #ffe0b2;
      margin-bottom: 6px;
    }

    .question-text {
      font-size: 1.08rem;
      margin-bottom: 12px;
      color: #fffde7;
    }

    .answers-grid {
      display: grid;
      gap: 10px;
      margin-top: 6px;
      margin-bottom: 10px;
    }

    .answer-btn {
      text-align: left;
      width: 100%;
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 9px 14px;
      background: radial-gradient(circle at left, rgba(255, 255, 255, 0.12), transparent 55%),
                  rgba(183, 28, 28, 0.45);
      border-radius: 999px;
      white-space: normal;
      line-height: 1.3;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .answer-label {
      flex-shrink: 0;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.35);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.82rem;
    }

    .answer-text {
      flex: 1;
      font-size: 0.95rem;
    }

    .answer-btn.correct {
      background: linear-gradient(135deg, #2e7d32, #81c784);
      border-color: rgba(224, 242, 241, 0.9);
    }

    .answer-btn.wrong {
      background: linear-gradient(135deg, #b71c1c, #ef5350);
      border-color: rgba(255, 205, 210, 0.9);
    }

    .answer-btn.disabled {
      pointer-events: none;
      opacity: 0.95;
    }

    .progress-bar-wrapper {
      margin-top: 10px;
      background: rgba(255, 255, 255, 0.12);
      border-radius: 999px;
      overflow: hidden;
      height: 8px;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffeb3b, #ff9800, #f44336);
      transition: width 0.3s ease-out;
    }

    .score-text {
      margin-top: 8px;
      font-size: 0.9rem;
      color: #ffecb3;
    }

    /* Result screen */
    .result-message {
      margin-top: 4px;
      margin-bottom: 10px;
    }

    .prize-box {
      margin-top: 12px;
      padding: 12px 15px;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 20px;
      border: 1px solid rgba(255, 215, 130, 0.65);
      font-size: 0.95rem;
      position: relative;
    }

    .prize-box::before {
      content: "üéÅ";
      position: absolute;
      top: -14px;
      right: 16px;
      font-size: 1.6rem;
    }

    .result-actions {
      margin-top: 16px;
    }

    .retry-btn {
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.7);
      box-shadow: none;
    }

    .retry-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.65);
    }

    /* Dancing Santa & fireworks */
    .celebration-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .santa-wrapper {
      position: absolute;
      bottom: 6px;
      right: 14px;
      font-size: 3.4rem;
      animation: santa-dance 1.4s infinite ease-in-out;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.7));
    }

    @media (max-width: 600px) {
      .santa-wrapper {
        font-size: 2.8rem;
        right: 10px;
      }
    }

    @keyframes santa-dance {
      0%   { transform: translateY(0) rotate(-6deg); }
      25%  { transform: translateY(-6px) rotate(4deg); }
      50%  { transform: translateY(0) rotate(-2deg); }
      75%  { transform: translateY(-4px) rotate(5deg); }
      100% { transform: translateY(0) rotate(-6deg); }
    }

    .firework {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: radial-gradient(circle, #fff 0, #ffe082 40%, transparent 70%);
      animation: fireworks 1.7s ease-out infinite;
      opacity: 0;
    }

    .firework:nth-child(1) { left: 16%; top: 18%; animation-delay: 0s; }
    .firework:nth-child(2) { left: 72%; top: 22%; animation-delay: 0.3s; }
    .firework:nth-child(3) { left: 40%; top: 10%; animation-delay: 0.6s; }
    .firework:nth-child(4) { left: 20%; top: 40%; animation-delay: 0.9s; }
    .firework:nth-child(5) { left: 82%; top: 40%; animation-delay: 1.2s; }

    @keyframes fireworks {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }
      30% {
        transform: scale(1.4);
        opacity: 1;
      }
      60% {
        transform: scale(1.9);
        opacity: 0.7;
      }
      100% {
        transform: scale(2.2);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <!-- Background music: file locale nel repo -->
  <audio id="bg-music" loop>
    <source src="musica-natale.mp3" type="audio/mpeg">
  </audio>

  <!-- Correct answer bells: file locale nel repo -->
  <audio id="correct-sound">
    <source src="campanellini.mp3" type="audio/mpeg">
  </audio>

  <!-- Wrong answer "capra": file locale nel repo -->
  <audio id="wrong-sound">
    <source src="capra.mp3" type="audio/mpeg">
  </audio>

  <!-- simple snowflakes -->
  <div class="snowflake" style="left:5%; animation-duration:9s; animation-delay:0s;">‚ùÑ</div>
  <div class="snowflake" style="left:18%; animation-duration:11s; animation-delay:1s;">‚ùÑ</div>
  <div class="snowflake" style="left:32%; animation-duration:10s; animation-delay:2s;">‚ùÑ</div>
  <div class="snowflake" style="left:48%; animation-duration:12s; animation-delay:0.5s;">‚ùÑ</div>
  <div class="snowflake" style="left:63%; animation-duration:9s; animation-delay:1.5s;">‚ùÑ</div>
  <div class="snowflake" style="left:79%; animation-duration:13s; animation-delay:0.8s;">‚ùÑ</div>
  <div class="snowflake" style="left:91%; animation-duration:10s; animation-delay:2.5s;">‚ùÑ</div>

  <div class="app">
    <button id="music-toggle">üîä Musica</button>
    <div class="garland"></div>

    <!-- INTRO SCREEN -->
    <section id="intro-screen">
      <h1>Quiz Speciale ‚Äì Regalo di Natale</h1>
      <h2>10 domande, un solo obiettivo: Scoprire il tuo regalo di Natale. üéÅ<br>Sei pronta a giocare?</h2>

      <p>Rispondi alle 10 domande a scelta multipla.</p>
      <p>Ogni domanda ha una sola risposta corretta.</p>
      <p>Niente pressioni‚Ä¶ ma in palio c‚Äô√® una serata davvero speciale. üí´</p>

      <button class="primary-btn" id="start-btn">Inizia il quiz üíú</button>

      <p class="footer-note">Suggerimento: segui l‚Äôistinto, non Google. üòâ</p>
    </section>

    <!-- QUIZ SCREEN -->
    <section id="quiz-screen" class="hidden">
      <div class="question-header">
        <div class="question-counter" id="question-counter"></div>
        <div class="question-text" id="question-text"></div>
      </div>

      <div class="answers-grid" id="answers-container">
        <!-- Bottoni risposta generati da JavaScript -->
      </div>

      <div class="progress-bar-wrapper">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <div class="score-text" id="score-text"></div>
    </section>

    <!-- RESULT SCREEN -->
    <section id="result-screen" class="hidden">
      <h1 id="result-title"></h1>
      <p class="result-message" id="result-message"></p>
      <div class="prize-box hidden" id="prize-box">
        <p><strong>üéÅ Premio:</strong><br>
        Un soggiorno ad Andermatt presso il Raddison Blu e una cena presso il ristorante IGNIV dello chef Andreas Caminada.</p>
        <p>Prepara la valigia, io penso al resto. üíú</p>
      </div>

      <div class="result-actions">
        <button class="retry-btn" id="retry-btn">Riprova il quiz</button>
      </div>
    </section>

    <!-- Celebration layer for win screen -->
    <div class="celebration-layer hidden" id="celebration-layer">
      <div class="firework"></div>
      <div class="firework"></div>
      <div class="firework"></div>
      <div class="firework"></div>
      <div class="firework"></div>
      <div class="santa-wrapper">üéÖ</div>
    </div>
  </div>

  <script>
    const questions = [
      {
        text: "In quale cantone svizzero si trova Andermatt?",
        answers: ["Grigioni", "Uri", "Vallese", "Berna"],
        correctIndex: 1
      },
      {
        text: "Nota stazione sciistica nel canton Uri collegata sci ai piedi con Sedrun",
        answers: ["Titlis", "Gemsstock", "Corvatsch", "Parsenn"],
        correctIndex: 1
      },
      {
        text: "Quale importante passo alpino si trova vicino ad Andermatt?",
        answers: ["Stelvio", "Gottardo", "Grimsel", "Susten"],
        correctIndex: 1
      },
      {
        text: "Famosa guida gastronomica che assegna stelle ai ristoranti",
        answers: ["Routard", "Gambero Rosso", "Michelin", "TripAdvisor"],
        correctIndex: 2
      },
      {
        text: "Quale guida gastronomica svizzera assegna punti anzich√© stelle?",
        answers: ["Falstaff", "Gault&Millau", "Veronelli", "Osterie d‚ÄôItalia"],
        correctIndex: 1
      },
      {
        text: "Cosa significa ‚ÄúIgniv‚Äù in retoromancio?",
        answers: ["Nido", "Focolare", "Festa", "Famiglia"],
        correctIndex: 0
      },
      {
        text: "La filosofia dei ristoranti IGNIV si basa soprattutto su:",
        answers: ["Cucina vegana", "Piatti XXL", "Condivisione delle portate", "Street food"],
        correctIndex: 2
      },
      {
        text: "Chef svizzero con il maggior numero di stelle Michelin",
        answers: ["Anton Mosimann", "Heiko Nieder", "Andreas Caminada", "Peter Knogl"],
        correctIndex: 2
      },
      {
        text: "Qual √® uno dei dolci iconici serviti spesso all‚ÄôIGNIV?",
        answers: ["Torta Foresta Nera", "Candy Store di piccoli dolci da condividere", "Cr√®me br√ªl√©e classica", "Gaufres svizzere"],
        correctIndex: 1
      },
      {
        text: "Completa: A fine del quiz vinci‚Ä¶",
        answers: ["Una fondue in baita", "Un massaggio spa generico", "Un soggiorno ad Andermatt e una cena all‚ÄôIGNIV", "Un‚Äôescursione con le capre"],
        correctIndex: 2
      }
    ];

    const introScreen = document.getElementById("intro-screen");
    const quizScreen = document.getElementById("quiz-screen");
    const resultScreen = document.getElementById("result-screen");

    const startBtn = document.getElementById("start-btn");
    const retryBtn = document.getElementById("retry-btn");

    const questionCounterEl = document.getElementById("question-counter");
    const questionTextEl = document.getElementById("question-text");
    const answersContainer = document.getElementById("answers-container");
    const progressBar = document.getElementById("progress-bar");
    const scoreTextEl = document.getElementById("score-text");

    const resultTitleEl = document.getElementById("result-title");
    const resultMessageEl = document.getElementById("result-message");
    const prizeBox = document.getElementById("prize-box");
    const celebrationLayer = document.getElementById("celebration-layer");

    const music = document.getElementById("bg-music");
    const musicToggle = document.getElementById("music-toggle");
    const correctSound = document.getElementById("correct-sound");
    const wrongSound = document.getElementById("wrong-sound");

    let currentQuestionIndex = 0;
    let score = 0;
    let acceptingAnswers = true;
    let musicOn = true;

    // volumi di base
    music.volume = 0.5;
    correctSound.volume = 0.9;
    wrongSound.volume = 0.9;

    function startQuiz() {
      currentQuestionIndex = 0;
      score = 0;
      introScreen.classList.add("hidden");
      resultScreen.classList.add("hidden");
      celebrationLayer.classList.add("hidden");
      prizeBox.classList.add("hidden");

      quizScreen.classList.remove("hidden");
      progressBar.style.width = "0%";
      scoreTextEl.textContent = `Risposte corrette finora: ${score}`;
      renderQuestion();

      // Avvia musica (se attiva) dopo click utente
      if (musicOn) {
        music.play().catch(() => {});
      }
    }

    function renderQuestion() {
      const q = questions[currentQuestionIndex];
      questionCounterEl.textContent = `Domanda ${currentQuestionIndex + 1} di ${questions.length}`;
      questionTextEl.textContent = q.text;

      answersContainer.innerHTML = "";
      const labels = ["A", "B", "C", "D"];

      q.answers.forEach((answerText, index) => {
        const btn = document.createElement("button");
        btn.className = "answer-btn";
        btn.dataset.index = index;

        const labelSpan = document.createElement("span");
        labelSpan.className = "answer-label";
        labelSpan.textContent = labels[index];

        const textSpan = document.createElement("span");
        textSpan.className = "answer-text";
        textSpan.textContent = answerText;

        btn.appendChild(labelSpan);
        btn.appendChild(textSpan);
        btn.addEventListener("click", onAnswerClick);

        answersContainer.appendChild(btn);
      });

      acceptingAnswers = true;
    }

    function onAnswerClick(event) {
      if (!acceptingAnswers) return;
      acceptingAnswers = false;

      const selectedBtn = event.currentTarget;
      const selectedIndex = parseInt(selectedBtn.dataset.index, 10);
      const q = questions[currentQuestionIndex];

      const buttons = Array.from(answersContainer.querySelectorAll(".answer-btn"));
      buttons.forEach(btn => btn.classList.add("disabled"));

      if (selectedIndex === q.correctIndex) {
        // risposta giusta
        score++;
        selectedBtn.classList.add("correct");
        scoreTextEl.textContent = `Risposte corrette finora: ${score}`;

        // suono campanellini
        correctSound.currentTime = 0;
        correctSound.play().catch(() => {});

        setTimeout(() => {
          currentQuestionIndex++;
          updateProgress();
          if (currentQuestionIndex < questions.length) {
            renderQuestion();
          } else {
            showResult(true);
          }
        }, 900);
      } else {
        // risposta sbagliata -> suono "capra", schermata quasi e si riparte
        selectedBtn.classList.add("wrong");
        const correctBtn = buttons[q.correctIndex];
        if (correctBtn) {
          correctBtn.classList.remove("disabled");
          correctBtn.classList.add("correct");
        }

        wrongSound.currentTime = 0;
        wrongSound.play().catch(() => {});

        setTimeout(() => {
          showResult(false);
        }, 900);
      }
    }

    function updateProgress() {
      const progress = (currentQuestionIndex / questions.length) * 100;
      progressBar.style.width = progress + "%";
    }

    function showResult(won) {
      quizScreen.classList.add("hidden");
      resultScreen.classList.remove("hidden");

      if (won) {
        resultTitleEl.textContent = "Complimenti, hai vinto! ‚ú®";
        resultMessageEl.textContent =
          "Hai risposto correttamente a tutte le domande. Direi che ti sei guadagnata il premio alla grande. üòâ";
        prizeBox.classList.remove("hidden");
        celebrationLayer.classList.remove("hidden");
      } else {
        resultTitleEl.textContent = "Quasi, quasi‚Ä¶ üôà";
        resultMessageEl.textContent =
          "Hai sbagliato una risposta, quindi il quiz ricomincia da capo. Ritenta il quiz e vedi se riesci a conquistare il premio. üéØ";
        prizeBox.classList.add("hidden");
        celebrationLayer.classList.add("hidden");
      }
    }

    // music toggle
    musicToggle.addEventListener("click", () => {
      if (musicOn) {
        music.pause();
        musicToggle.textContent = "üîá Musica";
      } else {
        music.play().catch(() => {});
        musicToggle.textContent = "üîä Musica";
      }
      musicOn = !musicOn;
    });

    startBtn.addEventListener("click", startQuiz);
    retryBtn.addEventListener("click", () => {
      startQuiz();
    });
  </script>
</body>
</html>
